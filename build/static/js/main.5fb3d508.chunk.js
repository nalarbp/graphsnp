(this["webpackJsonpgraph-snp"]=this["webpackJsonpgraph-snp"]||[]).push([[0],{1096:function(e,t,a){},1098:function(e,t,a){},1101:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),s=a.n(r),i=a(26),c=a.n(i),o=(a(512),a(163)),d=a(164),l=a(165),u=a(174),p=(a(513),a(36)),h=a(1133),g=a(1136),f=a(1127),b=a(1115),j=(a(238),a(32)),O=a(24),v="INPUT_LOADING",y="GRAPH_OBJECT",m="GRAPH_CLUSTER",x="MATRIX_HAMMING",S="NAV_LOCATION",_="SEQ_DATA",E="META_DATA",w="METADATA_CATEGORICAL",T="TIME_TREE_DATA",D="COLOR_LUT",C="SETTING_METHOD",I="SETTING_LAYOUT",L="SETTING_IS_USER_REDRAW",M="SETTING_EDGE_FILTER_CUTOFF",U="SETTING_IS_USER_FILTER_EDGES",A="SETTING_CLUSTER_METHOD",k="SETTING_IS_USER_CLUSTERING",N="SETTING_IS_EDGE_SCALED",F="SETTING_EDGE_SCALE_FACTOR",R="SETTING_IS_HIDE_EDGES",G="SETTING_EDGE_HIDE_CUTOFF",q="SETTING_COLOR_NODE_BY",P="SETTING_EXPORT_FORMAT",H="SETTING_IS_USER_DOWNLOADING",B="SETTING_TRANS_LOC_LEVEL",z="DIST_DATA_TO_DISPLAY",V="DIST_DATA_COLUMN",X="DIST_CHART_ORIENTATION",$="DIST_CHART_TYPE",W="DIST_IS_USER_GENERATE_MATRIX",Y="DIST_EXPORT_FORMAT",J="DIST_IS_USER_DRAW",K="DIST_IS_USER_EXPORT";function Q(e){return{type:S,payload:e}}var Z=a(1140),ee=a(47),te=a.n(ee),ae=a(167),ne=a(1122),re=a(501),se=a(103),ie=a(1137),ce=a(1138);function oe(e){return{type:_,payload:e}}function de(e){return{type:E,payload:e}}function le(e){return{type:T,payload:e}}function ue(e){return{type:v,payload:e}}var pe=a(518);function he(e){this.seq=e,this.seqIDs=e.map((function(e){return e.id}))}he.prototype.getHammingMatrix=function(){for(var e=this.seq,t=this.seqIDs,a=new Map,n=0;n<t.length-1;n++)for(var r=e[n],s=n+1;s<e.length;s++){var i=e[s],c=pe(r.sequence,i.sequence);if(a.get(r.id)){var o=a.get(r.id);o.push({source:r.id,target:i.id,value:c}),a.set(r.id,o)}else{var d=[{source:r.id,target:i.id,value:c}];a.set(r.id,d)}if(a.get(i.id)){var l=a.get(i.id);l.push({source:i.id,target:r.id,value:c}),a.set(i.id,l)}else{var u=[{source:i.id,target:r.id,value:c}];a.set(i.id,u)}}return a};var ge=he;function fe(e){return{type:x,payload:e}}function be(e){return{type:y,payload:e}}function je(e){return{type:m,payload:e}}var Oe=a(519).fastaToJson,ve=ne.a.Dragger;var ye=Object(j.b)((function(e){return{sequence:e.sequence,patientMovement:e.patientMovement}}),(function(e){return Object(O.b)({sequenceToStore:oe,isinputLoadingToStore:ue,hmmMatrixToStore:fe},e)}))((function(e){function t(){return(t=Object(ae.a)(te.a.mark((function t(a){var n,r,s,i,c,o,d,l,u;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.sequence){t.next=44;break}return t.next=3,Oe(a);case 3:if(n=t.sent,r=[],!(Array.isArray(n)&&n.length>1)){t.next=41;break}s={},i=[],c=!0,o=0;case 10:if(!(o<n.length)){t.next=38;break}if(d=n[o].messages,l=n[o].parsedSequence,u=n[o].success,-1===i.indexOf(l.size)&&i.push(l.size),u){t.next=19;break}return c=!1,alert("Parsing error:",l.name),t.abrupt("break",38);case 19:if(!(d.length>0)){t.next=23;break}return c=!1,alert(d[0]),t.abrupt("break",38);case 23:if(!(i.length>1)){t.next=27;break}return c=!1,alert("Size error: Alignment required sequence with same length"),t.abrupt("break",38);case 27:if(s[l.name]){t.next=31;break}s[l.name]=!0,t.next=34;break;case 31:return c=!1,alert("Sequence error: Duplicated sequence"),t.abrupt("break",38);case 34:c&&r.push({id:l.name,size:l.size,sequence:l.sequence.toLowerCase()});case 35:o++,t.next=10;break;case 38:c&&(re.b.success("The sequences have been loaded, now building distance matrix ..",1),setTimeout((function(){var t=new ge(r).getHammingMatrix();re.b.success("Pair-wise SNP distance matrix has been created",1),e.sequenceToStore(r),e.hmmMatrixToStore(t),e.isinputLoadingToStore(!1)}),100)),t.next=42;break;case 41:alert("Error: Required at least 2 sequences");case 42:t.next=45;break;case 44:alert("Sequences have been loaded. Refresh to re-load a new one");case 45:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(ve,{accept:".fa, .fasta, .fna, .mfa",showUploadList:!1,style:{backgroundColor:"transparent",height:"500px"},name:"file",multiple:!1,action:"dummy-post",beforeUpload:function(a){if(a){var n=new FileReader;n.readAsText(a),e.isinputLoadingToStore(!0),n.onloadend=function(e){!function(e){t.apply(this,arguments)}(e.target.result)}}return!1},children:Object(n.jsx)("div",{id:"input-loader-snps",children:Object(n.jsxs)(se.a,{id:"input-loader-button-snps",shape:"round",size:"large",children:[e.sequence?Object(n.jsx)(ie.a,{style:{fontSize:"14pt"}}):Object(n.jsx)(ce.a,{})," SNPs"]})})})})}));function me(e){return{type:D,payload:e}}function xe(e){return{type:w,payload:e}}var Se=a(1130),_e=a(1124),Ee=a(162),we=a.n(Ee),Te=a(227),De=a(1129),Ce=a(485),Ie=a(1113),Le=a(1114),Me=a(1139),Ue=a(12);function Ae(e,t,a){return a.indexOf(e)===t}function ke(e,t){var a=Ue.cloneDeep(e),n=null;if(Array.isArray(a)&&a.length>0){"clusterID"===t&&(a=a.filter((function(e){return"na"!==e.clusterID})));var r=function(e,t){for(var a=Object(De.a)().domain([0,e.length]).interpolator(t),n=[],r=0;r<e.length;r++)n.push(a(r));return Object(Ce.a)().domain(e).range(Ie.a)}(a.map((function(e){return e[t]})).filter(Ae),Le.a),s=new Map;a.forEach((function(e){s.set(e.sample,r(e[t]))})),n=s}return n}function Ne(e,t){var a=Ue.cloneDeep(t),n=new Map;return a.forEach((function(t){var a=t[e]&&Object(Me.a)(t[e])?Object(Me.a)(t[e]).formatHex():Object(Me.a)("lightgray").formatHex();n.set(t.sample_id,a)})),n}function Fe(e,t,a,n){if(e){var r=t+1,s=r?r*a:3;return"edge"===n||s<1?s:1}return"edge"===n?3:1}function Re(e){return e*Math.max(document.documentElement.clientHeight,window.innerHeight||0)/100}function Ge(e){var t=0;return e.hospital_id&&(t=1,e.ward_id&&(t=2,e.bay_id&&(t=3,e.bed_id&&(t=4)))),t}function qe(e,t){var a=0;return e.hospital_id===t.hospital_id&&(a=1,e.ward_id===t.ward_id&&(a=2,e.bay_id===t.bay_id&&(a=3,e.bed_id===t.bed_id&&(a=4)))),a}function Pe(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}var He=a(12),Be=Object(Te.extendMoment)(we.a),ze=Object(_e.a)("%Y-%m-%d");function Ve(){return(Ve=Object(ae.a)(te.a.mark((function e(t,a,n,r,s){var i,c,o,d,l,u,p,h,g,f,b,j,O;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.a)(t).then((function(e){return e}));case 2:if(i=e.sent,c=["sample_id","sample_date","patient_id"],o=Object.keys(i[0]),d=!0,c.forEach((function(e){-1===o.indexOf(e)&&(d=!1)})),d){e.next=11;break}return alert("Invalid headers: One or more required headers was not found"),s(!1),e.abrupt("return");case 11:if(l=He.countBy(i,"sample_id"),!((u=Object.keys(l).map((function(e){return{name:e,count:l[e]}})).filter((function(e){return e.count>1}))).length>0)){e.next=17;break}return alert("Invalid data: duplicate record in column sample id"+"".concat(JSON.stringify(u))),s(!1),e.abrupt("return");case 17:if(!!!l[""]){e.next=22;break}return alert("Invalid data: column sample_id contain empty record"),s(!1),e.abrupt("return");case 22:if(p=!1,i.forEach((function(e){e.sample_id=e.sample_id.replace(/\s*$/,""),e.sample_date=e.sample_date.replace(/\s*$/,""),ze(e.sample_date)?(e.uid=e.sample_id,e.sample_date=ze(e.sample_date)):p=!0})),!p){e.next=28;break}return alert("Invalid data: wrong date format in column sample date"),s(!1),e.abrupt("return");case 28:h=[],g=[],o.forEach((function(e){var t=e.split(":");t.length>1&&"color"===t[1]?g.push(t[0]):"sample_id"!==e&&h.push(e)})),f={},b=new Map,j=["0",0,"null","na","#N/A","NA","","excluded"],h.forEach((function(e){var t=e,a=[],n=[];i.forEach((function(e){var r={};r.sample=e.sample_id,r[t]=e[t],n.push(r),a.push(e[t])})),a.filter(Ae),a.forEach((function(e){var a=n.filter((function(a){return a[t]===e})).map((function(e){return e.sample}));if(-1===j.indexOf(e)){var r=t.concat("-",e);b.set(r,a)}}));var r=null;g.indexOf(e)>-1?r=Ne(e.concat(":color"),i):r=ke(n,t);f[t]=r})),O=new Map,i.forEach((function(e){O.set(e.sample_id,e)})),a(O),n(f),r(b),s(!1);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return(Xe=Object(ae.a)(te.a.mark((function e(t,a,n){var r,s,i,c,o,d,l;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Se.a)(t).then((function(e){return e}));case 2:if(r=e.sent,s=["patient_id","start_date","end_date","hospital_id","ward_id","bay_id","bed_id"],i=["null",""," ","na","NA","N/A","#N/A","NULL","Null"],c=Object.keys(r[0]),o=!0,s.forEach((function(e){-1===c.indexOf(e)&&(o=!1)})),o){e.next=12;break}return alert("Invalid headers: One or more required headers was not found"),n(!1),e.abrupt("return");case 12:if(d=!1,r.forEach((function(e){e.patient_id=e.patient_id.replace(/\s*$/,""),e.start_date=e.start_date.replace(/\s*$/,""),e.end_date=e.end_date.replace(/\s*$/,""),e.hospital_id=-1!==i.indexOf(e.hospital_id)?null:e.hospital_id.replace(/\s*$/,""),e.ward_id=-1!==i.indexOf(e.ward_id)?null:e.ward_id.replace(/\s*$/,""),e.bay_id=-1!==i.indexOf(e.bay_id)?null:e.bay_id.replace(/\s*$/,""),e.bed_id=-1!==i.indexOf(e.bed_id)?null:e.bed_id.replace(/\s*$/,""),Be(e.start_date)&&Be(e.end_date)?(e.start_date=Be(e.start_date),e.end_date=Be(e.end_date)):d=!0})),!d){e.next=18;break}return alert("Invalid data: wrong date format in column start_date and or end_date"),n(!1),e.abrupt("return");case 18:l=new Map,r.map((function(e){return e.patient_id})).filter(Ae).forEach((function(e){var t=[];r.filter((function(t){return t.patient_id===e})).forEach((function(a){var n={pid:e,start_date:a.start_date,end_date:a.end_date,hospital_id:a.hospital_id,ward_id:a.ward_id,bay_id:a.bay_id,bed_id:a.bed_id};t.push(n)})),l.set(e,t)})),a(l),n(!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=ne.a.Dragger;var We=Object(j.b)((function(e){return{metadata:e.metadata}}),(function(e){return Object(O.b)({metadataToStore:de,colorLUTtoStore:me,isinputLoadingToStore:ue,categoricalMapToStore:xe},e)}))((function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)($e,{accept:".csv",showUploadList:!1,style:{height:"500px",backgroundColor:"transparent"},name:"file",multiple:!1,action:"dummy-post",beforeUpload:function(t){if(t){var a=new FileReader;a.readAsDataURL(t),e.isinputLoadingToStore(!0),a.onloadend=function(t){!function(e,t,a,n,r){Ve.apply(this,arguments)}(t.target.result,e.metadataToStore,e.colorLUTtoStore,e.categoricalMapToStore,e.isinputLoadingToStore)}}return!1},children:Object(n.jsx)("div",{id:"input-loader-metadata",children:Object(n.jsxs)(se.a,{id:"input-loader-button-metadata",shape:"round",size:"large",children:[e.metadata?Object(n.jsx)(ie.a,{style:{fontSize:"14pt"}}):Object(n.jsx)(ce.a,{})," Metadata"]})})})})})),Ye=ne.a.Dragger;var Je=Object(j.b)((function(e){return{patientMovement:e.patientMovement}}),(function(e){return Object(O.b)({patientMovementToStore:le,isinputLoadingToStore:ue},e)}))((function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(Ye,{accept:".csv",showUploadList:!1,style:{height:"500px",backgroundColor:"transparent"},name:"file",multiple:!1,action:"dummy-post",beforeUpload:function(t){if(t){var a=new FileReader;a.readAsDataURL(t),e.isinputLoadingToStore(!0),a.onloadend=function(t){!function(e,t,a){Xe.apply(this,arguments)}(t.target.result,e.patientMovementToStore,e.isinputLoadingToStore)}}return!1},children:Object(n.jsx)("div",{id:"input-loader-patientMovement",children:Object(n.jsxs)(se.a,{id:"input-loader-button-patientMovement",shape:"round",size:"large",children:[e.patientMovement?Object(n.jsx)(ie.a,{twoToneColor:"#52c41a"}):Object(n.jsx)(ce.a,{})," Stays Overlap"]})})})})})),Ke=function(e){return Object(n.jsx)(h.a,{children:Object(n.jsx)(g.a,{sm:24,id:"footer-component",children:Object(n.jsxs)("p",{children:[Object(n.jsx)("a",{href:"https://graphsnp.beatsonlab.com",target:"_blank",rel:"noopener noreferrer",children:"GraphSNP v.0.1"}),Object(n.jsx)("br",{}),Object(n.jsxs)("b",{children:[" ","Graph-based outbreak cluster and transmission",Object(n.jsx)("br",{})," detection and visualization using single-nucleotide polymorphisms (SNPs) in web browser"]}),Object(n.jsx)("br",{})," Developed by Budi Permana at"," ",Object(n.jsxs)("a",{href:"https://beatsonlab.com/",target:"_blank",rel:"noopener noreferrer",children:[" ","Beatson Lab"]}),Object(n.jsx)("br",{})," ",Object(n.jsx)("a",{href:"https://www.uq.edu.au/",target:"_blank",rel:"noopener noreferrer",children:"The University of Queensland"})," ","| Australia",Object(n.jsx)("br",{})," ",(new Date).getFullYear()]})})})},Qe=a(486),Ze=a.n(Qe),et=Object(n.jsx)(Z.a,{style:{fontSize:34},spin:!0}),tt=String(Re(100)-380)+"px",at={fpsLimit:24,particles:{number:{value:25},size:{value:4},links:{enable:!0,distance:75},move:{enable:!0,speed:2,outModes:{default:"bounce"}}},interactivity:{events:{onhover:{enable:!1,mode:"repulse"}}}};var nt=Object(j.b)((function(e){return{isInputLoading:e.isInputLoading}}),(function(e){return Object(O.b)({changeNavLocation:Q},e)}))((function(e){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(h.a,{children:Object(n.jsx)(g.a,{xs:24,id:"header-content",children:Object(n.jsx)(f.a,{visible:e.isInputLoading,closable:!1,centered:!0,width:0,footer:null,bodyStyle:{textAlign:"center",padding:"0px"},children:Object(n.jsx)(b.a,{indicator:et,style:{color:"white"},tip:"Processing...",size:"large"})})})}),Object(n.jsxs)(h.a,{id:"input-wrapper",children:[Object(n.jsx)(Ze.a,{params:at,height:tt,style:{position:"absolute",height:"200px"}}),Object(n.jsx)(g.a,{xs:24,sm:8,children:Object(n.jsx)(ye,{})}),Object(n.jsx)(g.a,{xs:24,sm:8,children:Object(n.jsx)(We,{})}),Object(n.jsx)(g.a,{xs:24,sm:8,children:Object(n.jsx)(Je,{})})]}),Object(n.jsx)(Ke,{})]})})),rt=a(1117),st=(a(975),a(1125)),it=a(1134),ct=a(1116),ot=a(1131),dt=a(307),lt=a(450).Graph,ut=a(1070);function pt(e){return{type:C,payload:e}}function ht(e){return{type:I,payload:e}}function gt(e){return{type:L,payload:e}}function ft(e){return{type:M,payload:e}}function bt(e){return{type:A,payload:e}}function jt(e){return{type:k,payload:e}}function Ot(e){return{type:N,payload:e}}function vt(e){return{type:F,payload:e}}function yt(e){return{type:R,payload:e}}function mt(e){return{type:G,payload:e}}function xt(e){return{type:q,payload:e}}function St(e){return{type:P,payload:e}}function _t(e){return{type:H,payload:e}}function Et(e){return{type:B,payload:e}}var wt=st.a.Option;var Tt=Object(j.b)((function(e){return{metadata:e.metadata,patientMovement:e.patientMovement,sequence:e.sequence,graphSettings:e.graphSettings,graphObject:e.graphObject,graphClusters:e.graphClusters,colorLUT:e.colorLUT}}),(function(e){return Object(O.b)({changeMethodSetting:pt,changeLayoutSetting:ht,changeIsUserReDrawSetting:gt,changeEdgeFilterCutoffSetting:ft,changeClusterMethodSetting:bt,changeIsUserClusteringSetting:jt,changeIsEdgeScaledSetting:Ot,changeEdgeScaleFactorSetting:vt,changeColorNodeSetting:xt,changeExportFormatSetting:St,changeIsUserDownloadingSetting:_t,changeIsHideEdgesByCutoff:yt,changeEdgesHideCutoff:mt,changeTransIcludeLocLevel:Et},e)}))((function(e){var t=e.graphSettings.method,a=e.graphSettings.layout,r=e.graphSettings.isUserReDraw,i=e.graphSettings.edgeFilterCutoff,c=e.graphSettings.clusterMethod,o=e.graphSettings.isUserClustering,d=e.graphSettings.isEdgeScaled,l=e.graphSettings.edgeScaleFactor,u=e.graphSettings.isHideEdgesByCutoff,p=e.graphSettings.hiddenEdgesCutoff,f=e.graphSettings.colorNodedBy,b=e.graphSettings.exportFormat,j=e.graphSettings.transIncludeLocLevel,O=function(e,t){return Object(n.jsx)(wt,{disabled:!1,value:e,children:e},t)};return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(h.a,{gutter:[8,8],children:[Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("h5",{children:"Graph settings"}),Object(n.jsx)("p",{children:"Construction method"}),Object(n.jsxs)(st.a,{disabled:!e.sequence,value:t,style:{width:"100%"},onChange:function(t){e.changeMethodSetting(t)},children:[Object(n.jsx)(wt,{value:"mcg",children:"MCG"}),Object(n.jsx)(wt,{disabled:!e.sequence||!e.metadata,value:"cge",children:"MCG + metadata"}),Object(n.jsx)(wt,{value:"cathai",children:"CATHAI"}),Object(n.jsx)(wt,{disabled:!(e.sequence&&e.metadata&&e.patientMovement),value:"hierSnpsMetaStayOverlap",children:"SNPs + Stay overlap (Transmission)"})]})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Graph layout"}),Object(n.jsxs)(st.a,{disabled:!e.sequence,value:a,style:{width:"100%"},onChange:function(t){e.changeLayoutSetting(t)},children:[Object(n.jsx)(wt,{value:"cose",children:"CoSE"}),Object(n.jsx)(wt,{value:"spread",children:"Spread"}),Object(n.jsx)(wt,{value:"fcose",children:"fCoSE"}),Object(n.jsx)(wt,{value:"random",children:"Random"}),Object(n.jsx)(wt,{value:"concentric",children:"Concentric"})]})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"SNPs cutoff"}),Object(n.jsx)(it.a,{min:0,disabled:!e.sequence,step:1,value:i,onChange:function(t){t>0&&e.changeEdgeFilterCutoffSetting(t)},style:{marginBottom:"5px"}})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Filter transmission edges from: (hierarchically) "}),Object(n.jsxs)(st.a,{disabled:"hierSnpsMetaStayOverlap"!==t,value:j,style:{width:"100%"},onChange:function(t){e.changeTransIcludeLocLevel(t)},children:[Object(n.jsx)(wt,{value:1,children:"SNPs"}),Object(n.jsx)(wt,{value:2,children:"Hospital"}),Object(n.jsx)(wt,{value:3,children:"Ward"}),Object(n.jsx)(wt,{value:4,children:"Bay"}),Object(n.jsx)(wt,{value:5,children:"Bed"})]})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(se.a,{danger:!0,disabled:!e.sequence,onClick:function(){r||e.changeIsUserReDrawSetting(!0)},children:"Draw graph"})}),Object(n.jsx)(ct.a,{style:{margin:"10px 0px 0px 0px"}}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("h5",{children:"Cluster Settings"}),Object(n.jsx)("p",{children:"Clustering method "}),Object(n.jsxs)(st.a,{disabled:!e.graphObject,value:c,style:{width:"100%"},onChange:function(t){e.changeClusterMethodSetting(t)},children:[Object(n.jsx)(wt,{value:"Connected Components",children:"Connected Components"}),Object(n.jsx)(wt,{value:"Louvain",children:"Louvain"})]})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(se.a,{disabled:!e.graphObject,onClick:function(){o||e.changeIsUserClusteringSetting(!0)},children:"Find clusters"})}),Object(n.jsx)(ct.a,{style:{margin:"10px 0px 0px 0px"}}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("h5",{children:"Visualization settings"}),Object(n.jsx)(ot.a,{style:{fontSize:"10px"},onChange:function(t){var a=t.target.checked;e.changeIsEdgeScaledSetting(a)},checked:d,disabled:!e.graphObject,children:"Scale edge to weight"})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Scale factor"}),Object(n.jsx)(it.a,{min:1e-5,disabled:!e.graphObject,step:.1,value:l,onChange:function(t){t>0&&e.changeEdgeScaleFactorSetting(t)}})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(ot.a,{style:{fontSize:"10px"},onChange:function(t){var a=t.target.checked;e.changeIsHideEdgesByCutoff(a)},checked:u,disabled:!e.graphObject,children:"Hide some edges"})}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Cutoff to hide the edges"}),Object(n.jsx)(it.a,{min:0,disabled:!e.graphObject,step:.1,value:p,onChange:function(t){t>0&&e.changeEdgesHideCutoff(t)}})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Color nodes by"}),Object(n.jsxs)(st.a,{disabled:!e.graphObject,value:f,style:{width:"100%"},onChange:function(t){e.changeColorNodeSetting(t)},children:[" ",e.colorLUT&&Object.keys(e.colorLUT)?Object.keys(e.colorLUT).map((function(e,t){return O(e,t)})):["na"].map((function(e,t){return O(e,t)}))]})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Download format"}),Object(n.jsxs)(st.a,{value:b,style:{width:"100%"},onChange:function(t){e.changeExportFormatSetting(t)},children:[Object(n.jsx)(wt,{disabled:!e.graphObject,value:"dot",children:"Graph (DOT)"}),Object(n.jsx)(wt,{disabled:!0,value:"edgeList",children:"Graph (Edge List)"}),Object(n.jsx)(wt,{disabled:!e.graphObject,value:"svg",children:"Graph (SVG)"}),Object(n.jsx)(wt,{disabled:!e.graphClusters,value:"clusterID",children:"Cluster IDs (CSV)"})]})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(se.a,{disabled:!e.graphClusters&&!e.graphObject,onClick:function(){switch(b){case"clusterID":(t=e.graphClusters.members)&&new dt.ExportToCsv({fieldSeparator:",",filename:"GraphSNP_clusterID",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0}).generateCsv(t);break;case"svg":e.changeIsUserDownloadingSetting(!0);break;case"dot":!function(e){var t=-1!==["hierSnpsMetaStayOverlap"].indexOf(e.creator),a=e.nodes,n=e.edges,r=new lt({multigraph:!0});Array.isArray(a)&&a.length>0&&a.forEach((function(e){r.setNode(e)})),Array.isArray(n)&&n.length>0&&n.forEach((function(e){var a=e.source,n=e.target,s=e.value?e.value:"null";console.log(s);var i=t?"forward":"none";r.setEdge(a,n,{weight:s,dir:i})})),Pe("Graph_in_DOT.gv",ut.write(r))}(e.graphObject)}var t},children:"Download"})})]})})})),Dt=a(315),Ct=a(67),It=a(148);function Lt(e,t){this.nodes=e,this.edges=t}Lt.prototype.getSymetricEdges=function(){var e=this.edges,t=new Map;return e=e.filter((function(a){var n=a.source.concat("-",a.target),r=a.target.concat("-",a.source);return e.find((function(e){return e.source===a.target&&e.target===a.source}))?!t.get(r)&&!t.get(n)&&(t.set(n,!0),t.set(r,!0),!0):(t.set(n,!0),t.set(r,!0),!0)})),new Lt(this.nodes,e)},Lt.prototype.getEdgesLowerThanCutoff=function(e){var t=this.edges;return e&&e>0&&(t=t.filter((function(t){return t.value<e}))),new Lt(this.nodes,t)},Lt.prototype.getEdgesGreaterThanCutoff=function(e){var t=this.edges;return e&&e>0&&(t=t.filter((function(t){return t.value>e}))),new Lt(this.nodes,t)};var Mt=Lt,Ut=a(12);var At=a(12);var kt=a(12);function Nt(e){this.stays=e}Nt.prototype.getRangeOfStays=function(){var e,t;return Array.isArray(this.stays)&&this.stays.length>0&&this.stays.forEach((function(a){e=e?e>a.start_date?a.start_date:e:a.start_date,t=t?t<a.end_date?a.end_date:t:a.end_date})),{start_date:e,end_date:t}},Nt.prototype.getLocationLevel=function(){var e;return Array.isArray(this.stays)&&this.stays.length>0&&this.stays.forEach((function(t){var a=Ge(t);e?a>e&&(e=a):e=a})),e};var Ft=Nt,Rt=Object(Te.extendMoment)(we.a),Gt=a(12);function qt(e,t,a,n,r){for(var s=0,i=a.stays.filter((function(e){return Ge(e)===r})),c=n.stays.filter((function(e){return Ge(e)===r})),o=0;o<i.length;o++)for(var d=i[o],l=Rt.range(d.start_date.startOf("day"),d.end_date.endOf("day")),u=0;u<c.length;u++){var p=c[u],h=Rt.range(p.start_date.startOf("day"),p.end_date.endOf("day"));if(l.overlaps(h))if(l.intersect(h).diff("days")<=7){var g=qe(d,p);"P-13"===e&&"P-18"===t&&(console.log(g),console.log("p1",d.hospital_id,d.ward_id,d.bay_id,d.bed_id),console.log("p2",p.hospital_id,p.ward_id,p.bay_id,p.bed_id)),g>s&&(s=g)}}return s}function Pt(e,t,a,n,r,s,i){var c={creator:null,nodes:null,edges:null};switch(t){case"mcg":var o=function(e,t){var a=Ut.cloneDeep(e),n=[],r=[];a.forEach((function(e,a){r.push(a);for(var s=e.sort((function(e,t){return e.value-t.value})),i=s[0].value,c=0,o=0;o<s.length;o++){if(s[o].value!==i){c=o;break}c=o}s.splice(c),t&&t>0&&(s=s.filter((function(e){return e.value<=t}))),n=n.concat(s)}));var s=new Mt(r,n).getSymetricEdges();return{nodes:s.nodes,edges:s.edges}}(e,a);c.creator="mcg",c.nodes=o.nodes,c.edges=o.edges;break;case"cathai":var d=function(e,t){var a=At.cloneDeep(e),n=[],r=[];a.forEach((function(e,a){r.push(a);var s=e;t&&t>0&&(s=s.filter((function(e){return e.value<=t}))),n=n.concat(s)}));var s=new Mt(r,n).getSymetricEdges();return{nodes:s.nodes,edges:s.edges}}(e,a);c.creator="cathai",c.nodes=d.nodes,c.edges=d.edges;break;case"cge":var l=function(e,t,a){var n=kt.cloneDeep(e),r=[],s=[];n.forEach((function(e,t){s.push(t);for(var a=e.sort((function(e,t){return e.value-t.value})),n=a[0].value,i=0,c=0;c<a.length;c++){if(a[c].value!==n){i=c;break}i=c}a.splice(i),r=r.concat(a)}));var i=new Mt(s,r).getSymetricEdges(),c=i.edges;return c.forEach((function(e){e.value=1,e.value<=a&&(e.value=e.value+1),t.forEach((function(t,a){-1!==t.indexOf(e.source)&&-1!==t.indexOf(e.target)&&(e.value=e.value+1)}))})),{nodes:i.nodes,edges:c}}(e,n,a);c.creator="cge",c.nodes=l.nodes,c.edges=l.edges;break;case"hierSnpsMetaStayOverlap":var u=function(e,t,a,n,r){var s=Gt.cloneDeep(e),i=Gt.cloneDeep(a),c=[],o=[];s.forEach((function(e,a){o.push(a);var n=e;t&&t>0&&(n=n.filter((function(e){return e.value<=t}))),c=c.concat(n)}));var d=[],l=[];if(c.length>0)for(var u=0;u<c.length;u++){var p=c[u],h=n.get(p.source).patient_id,g=n.get(p.target).patient_id,f=Rt(n.get(p.source).sample_date),b=Rt(n.get(p.target).sample_date),j=i.get(h)?new Ft(i.get(h)):null,O=i.get(g)?new Ft(i.get(g)):null;if(j instanceof Ft&&O instanceof Ft&&Array.isArray(j.stays)&&Array.isArray(O.stays)&&j.stays.length>0&&O.stays.length>0){var v=j.getLocationLevel(),y=O.getLocationLevel(),m=Math.min(v,y)?Math.min(v,y):null;if(m){var x=j.getRangeOfStays(),S=O.getRangeOfStays(),_=Rt.range(x.start_date.startOf("day"),x.end_date.endOf("day")),E=Rt.range(S.start_date.startOf("day"),S.end_date.endOf("day"));if(_.overlaps(E))if(b.isAfter(f,"day")){var w=qt(h,g,j,O,m);p.dir="forward",p.value=1+w,d.push(p)}else p.dir="none",p.value=1,l.push(p);else p.dir="none",p.value=1,l.push(p)}else p.dir="none",p.value=1,l.push(p)}else p.dir="none",p.value=1,l.push(p)}return d=d.filter((function(e){return e.value>=r})),{nodes:o,edges:d}}(e,a,r,s,i);c.creator="hierSnpsMetaStayOverlap",c.nodes=u.nodes,c.edges=u.edges}return c}function Ht(e,t,a){var n,r,s,i,c=[],o=[];for(c.push(e),a[e]=!0;c.length>0;)for(e=c.shift(),o.push(e),n=0,r=(s=t[e]).length;n<r;n+=1)a[i=s[n]]||(c.push(i),a[i]=!0);return o}var Bt=a(1081);function zt(e,t){var a=null;switch(t){case"Connected Components":a=function(e){var t,a=e.nodes,n=function(e){var t,a,n,r,s,i={};for(t=0,a=e.length;t<a;t+=1)r=(n=e[t]).source,s=n.target,i[r]?i[r].push(s):i[r]=[s],i[s]?i[s].push(r):i[s]=[r];return i}(e.edges),r=[],s={};for(t in n)n.hasOwnProperty(t)&&!s[t]&&r.push(Ht(t,n,s));var i=[];r=r.sort((function(e,t){return t.length-e.length}));var c=[];return r.forEach((function(e,t){Array.isArray(e)&&e.length>0&&e.forEach((function(e){c.push(e),i.push({sample:e,clusterID:t+1})}))})),a.forEach((function(e){-1===c.indexOf(e)&&i.push({sample:e,clusterID:"na"})})),console.log(i),{group:r,members:i}}(e);break;case"Louvain":a=function(e){var t=e.edges,a=e.nodes,n=[];t.forEach((function(e){n.push(e.source,e.target)})),n=n.filter(Ae);var r=new Map,s=[],i=Bt.jLouvain().nodes(n).edges(t)(),c=[];for(var o in i){c.push(o);var d=i[o]+1;if(s.push({sample:o,clusterID:d}),r.get(d)){var l=r.get(d);l.push(o),r.set(d,l)}else r.set(d,[o])}var u=[];return r.forEach((function(e,t){u.push(e)})),a.forEach((function(e){-1===c.indexOf(e)&&s.push({sample:e,clusterID:"na"})})),{group:u,members:s}}(e)}return a}var Vt=a(175),Xt=a.n(Vt),$t=a(493),Wt=a.n($t),Yt=a(12),Jt=a(1085),Kt=a(1088);Xt.a.use(Jt),Xt.a.use(Kt),Xt.a.use(Wt.a);var Qt=Object(j.b)((function(e){return{metadata:e.metadata,patientMovement:e.patientMovement,sequence:e.sequence,graphObject:e.graphObject,hammMatrix:e.hammMatrix,graphSettings:e.graphSettings,colorLUT:e.colorLUT,graphClusters:e.graphClusters,categoricalMap:e.categoricalMap}}),(function(e){return Object(O.b)({changeIsUserClusteringSetting:jt,changeIsUserReDrawSetting:gt,hmmMatrixToStore:fe,graphObjectToStore:be,graphClusterToStore:je,colorLUTtoStore:me,changeIsUserDownloadingSetting:_t},e)}))((function(e){var t=Object(r.useState)(!1),a=Object(Ct.a)(t,2),i=a[0],c=a[1],o=Object(r.useState)(!1),d=Object(Ct.a)(o,2),l=d[0],u=d[1],p=e.graphSettings.method,h=e.graphSettings.layout,f=e.graphSettings.isUserReDraw,b=e.graphSettings.edgeFilterCutoff,j=e.graphSettings.clusterMethod,O=e.graphSettings.isUserClustering,v=e.graphSettings.isHideEdgesByCutoff,y=e.graphSettings.hiddenEdgesCutoff,m=e.graphSettings.colorNodedBy,x=e.graphSettings.isEdgeScaled,S=e.graphSettings.edgeScaleFactor,_=e.graphSettings.isUserDownloading,E=e.graphSettings.transIncludeLocLevel,w={name:h,animate:!1,fit:!0},T=Object(r.useRef)(null);return Object(r.useEffect)((function(){f&&(u(!0),setTimeout((function(){!function(){var t=e.hammMatrix?e.hammMatrix:new ge(e.sequence).getHammingMatrix(),a=Pt(t,p,b,e.categoricalMap,e.patientMovement,e.metadata,E),n=function(e){var t=e.creator,a=e.nodes,n=e.edges,r=[];return n.forEach((function(e){r.push({data:{source:e.source,target:e.target,weight:e.value,dir:"forward"===e.dir?"forward":"none"}})})),a.forEach((function(e){var a="nlv"===t?e.data:[],n="nlv"===t?"compound":"singleton";r.push({data:{id:e,nodeType:n,data:a}})})),r}(a);if(n){var r=Xt()({elements:n,container:document.getElementById("graph-cont-cytoscape-canvas"),pannable:!0,selected:!0,boxSelectionEnabled:!1,style:[{selector:"node",style:{label:"data(id)","border-width":3,"border-style":"solid","border-color":"black","background-color":"lightgray"}},{selector:"edge",style:{opacity:function(e){var t=e.data("weight");return v&&t<=y?0:1},label:"data(weight)","font-size":"10px","text-background-color":"#F5E372",color:"red",width:function(e){return Fe(x,e.data("weight"),S,"edge")},"target-arrow-color":"black","target-arrow-shape":function(e){return"forward"===e.data("dir")?"triangle":"none"},"curve-style":"bezier","arrow-scale":function(e){return Fe(x,e.data("weight"),S,"arrow")}}},{selector:":selected",style:{"border-width":"5","border-color":"red","border-style":"dashed",padding:"8px"}}]});r.layout(w).run(),T.current=r,e.hammMatrix&&e.hmmMatrixToStore(t),e.graphObjectToStore(a)}}(),c(!0),u(!1),e.changeIsUserReDrawSetting(!1)}),100))}),[f]),Object(r.useEffect)((function(){_&&(Pe("GraphSNP-cytoscape-svg.svg",T.current.svg({scale:1,full:!0})),e.changeIsUserDownloadingSetting(!1))}),[_]),Object(r.useEffect)((function(){O&&e.graphObject&&(u(!0),setTimeout((function(){var t=zt(e.graphObject,j);u(!1),re.b.success("Found ".concat(t.group.length," clusters in the graph"),2);var a=ke(t.members,"clusterID"),n=Yt.cloneDeep(e.colorLUT);n?n=Object(Dt.a)(Object(Dt.a)({},n),{},{clusterID:a}):n={clusterID:a};e.colorLUTtoStore(n),e.graphClusterToStore(t),e.changeIsUserClusteringSetting(!1)}),100))}),[j,O]),Object(r.useEffect)((function(){if(h&&T.current){var e=T.current,t={name:h,animate:!1,fit:!0,prelayout:!1};e.layout(t).run(),T.current=e}}),[h]),Object(r.useEffect)((function(){if(e.graphObject&&T.current){var t=T.current;x?(t.style().selector("edge").style({width:function(e){return Fe(x,e.data("weight"),S,"edge")},"arrow-scale":function(e){return Fe(x,e.data("weight"),S,"arrow")}}).update(),T.current=t):(t.style().selector("edge").style({width:3,"arrow-scale":1}).update(),T.current=t)}}),[x,S]),Object(r.useEffect)((function(){if(e.graphObject&&T.current){var t=T.current;v?(t.style().selector("edge").style({opacity:function(e){var t=e.data("weight");return v&&t<=y?0:1}}).update(),T.current=t):(t.style().selector("edge").style({opacity:1}).update(),T.current=t),T.current=t}}),[v,y]),Object(r.useEffect)((function(){if(m&&e.colorLUT&&T.current){var t=T.current;t.style().selector("node").style({"background-color":function(t){return function(e,t,a){var n="lightgray";if("na"!==t){var r=a[t];n=r.get(e)?r.get(e):"lightgray"}return n}(t.data("id"),m,e.colorLUT)}}).update(),T.current=t}}),[m,e.colorLUT]),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)(g.a,{span:24,style:{position:"relative"},children:[Object(n.jsx)("div",{id:"graph-cont-is-empty",style:{display:i?"none":"block"},children:Object(n.jsx)(It.a,{description:"No previous graph found: click draw to create one",image:It.a.PRESENTED_IMAGE_SIMPLE})}),Object(n.jsx)("div",{id:"graph-cont-is-processing",style:{display:l?"block":"none"},children:Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{children:Object(n.jsx)(Z.a,{style:{fontSize:18},spin:!0})})," ","Processing ..."]})})]}),Object(n.jsx)("div",{id:"graph-cont-cytoscape-canvas"})]})})),Zt=rt.a.Sider,ea=rt.a.Content,ta=function(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(rt.a,{children:[Object(n.jsx)(Zt,{id:"graphsnp-sider",children:Object(n.jsx)(Tt,{})}),Object(n.jsx)(rt.a,{children:Object(n.jsx)(ea,{id:"graphsnp-container",children:Object(n.jsx)(Qt,{})})})]})})};a(1096);var aa=Object(j.b)(null,(function(e,t){return Object(O.b)({changeNavLocation:Q},e)}))((function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(rt.a,{id:"page-documentation"})})}));a(472);function na(e){return{type:z,payload:e}}function ra(e){return{type:V,payload:e}}function sa(e){return{type:X,payload:e}}function ia(e){return{type:Y,payload:e}}function ca(e){return{type:J,payload:e}}function oa(e){return{type:K,payload:e}}var da=st.a.Option;var la=Object(j.b)((function(e){return{snpDistSettings:e.snpDistSettings,hammingMatrix:e.hammMatrix,colorLUT:e.colorLUT}}),(function(e){return Object(O.b)({dist_changeDataToDisplay:na,dist_changeDataColumn:ra,dist_changeChartOrientation:sa,dist_changeExportFormat:ia,dist_changeIsUserDraw:ca,dist_changeIsUserExport:oa},e)}))((function(e){var t=e.snpDistSettings.dataToDisplay,a=e.snpDistSettings.dataColumn,r=e.snpDistSettings.chartOrientation,i=e.snpDistSettings.snpDistExportFormat,c=e.snpDistSettings.isUserDrawChart,o=e.snpDistSettings.isUserExportSnpDist;return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(h.a,{gutter:[8,8],children:[Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("h5",{children:"Pair-wise SNPs distance settings"}),Object(n.jsx)("p",{children:"Show distribution for:"}),Object(n.jsxs)(st.a,{value:t,style:{width:"100%"},disabled:!e.hammingMatrix,onChange:function(t){e.dist_changeDataToDisplay(t)},children:[Object(n.jsx)(da,{value:"all",children:"All"}),Object(n.jsx)(da,{value:"per-category",children:"Per metadata column"})]})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Available metadata column"}),Object(n.jsx)(st.a,{value:a,style:{width:"100%"},disabled:!e.hammingMatrix,onChange:function(t){e.dist_changeDataColumn(t)}})]}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("p",{children:"Chart(s) orientation"}),Object(n.jsxs)(st.a,{value:r,style:{width:"100%"},disabled:!e.hammingMatrix,onChange:function(t){e.dist_changeChartOrientation(t)},children:[Object(n.jsx)(da,{value:"horizontal",children:"Horizontal"}),Object(n.jsx)(da,{value:"vertical",children:"Vertical"})]})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(se.a,{disabled:!e.hammingMatrix,onClick:function(t){c||e.dist_changeIsUserDraw(!0)},children:"Draw chart"})}),Object(n.jsx)(ct.a,{style:{margin:"10px 0px 0px 0px"}}),Object(n.jsxs)(g.a,{span:24,children:[Object(n.jsx)("h5",{children:"Download settings"}),Object(n.jsx)("p",{children:"Format "}),Object(n.jsxs)(st.a,{value:i,onChange:function(t){e.dist_changeExportFormat(t)},style:{width:"100%"},children:[Object(n.jsx)(da,{disabled:!e.hammingMatrix,value:"symSnpDist",children:"Pair-wise SNPs differences"}),Object(n.jsx)(da,{value:"svg",children:"SVG Chart"}),Object(n.jsx)(da,{value:"png",children:"PNG Chart"})]})]}),Object(n.jsx)(g.a,{span:24,children:Object(n.jsx)(se.a,{onClick:function(t){o||e.dist_changeIsUserExport(!0)},children:"Download"})})]})})})),ua=a(1121),pa=a(145),ha=a(1120),ga=a(311),fa=a(312),ba=a(502),ja=a(1118),Oa=a(1119),va=a(1128),ya=a(1102),ma=a(1135);a(12);var xa=Object(j.b)((function(e){return{snpDistSettings:e.snpDistSettings,hammingMatrix:e.hammMatrix}}),(function(e){return Object(O.b)({dist_changeIsUserDraw:ca,dist_changeIsUserExport:oa},e)}))((function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(),s=100*Math.max(document.documentElement.clientWidth,window.innerWidth||0)/100-200-20,i=Re(100)-120-20,c={top:30,right:30,bottom:30,left:30},o=s-c.left-c.right,d=i-c.top-c.bottom,l=e.snpDistSettings.dataToDisplay,u=(e.snpDistSettings.dataColumn,e.snpDistSettings.chartOrientation),p=e.snpDistSettings.snpDistExportFormat,f=e.snpDistSettings.isUserDrawChart,b=e.snpDistSettings.isUserExportSnpDist;return Object(r.useEffect)((function(){f&&setTimeout((function(){!function(){ua.a("#snpdist_svgGroup").remove();var t=[],n=[];e.hammingMatrix.forEach((function(e,a){n.push(a),t=t.concat(e)}));var r=new Mt(n,t).getSymetricEdges().edges;if("all"===l){var s=r.map((function(e){return e.value}));!function(e,t,a,n,r,s,i,c){var o=ga.a(t),d=fa.a(t),l=ba.a(t,.25),u=ba.a(t,.75),p=(ja.a(t),Oa.a(t),u-l),h=(Math.max(o,l-1.5*p),Math.min(d,u+1.5*p),"vertical"===s?n:a),g="vertical"===s?.4*a:.4*n,f="vertical"===s?n:a,b="vertical"===s?.2*a:.2*n,j=va.a(t,(function(e){return e.length}),(function(e){return e})),O=Array.from(j.entries()),v=Array.from(j.keys()),y=Array.from(j.values()),m=pa.a().range([g,0]),x=pa.a().range([0,h]),S=ha.a().range([g,0]),_=ha.a().range([0,h]),E="vertical"===s?g/(ya.a(0,fa.a(v)).length+1):h/(ya.a(0,fa.a(v)).length+1),w="vertical"===s?x:m;w.domain([0,fa.a(y)]);var T="vertical"===s?S:_;T.domain(ya.a(0,fa.a(v)+1));var D="vertical"===s?ma.a():ma.b();D.scale(w);var C="vertical"===s?ma.b():ma.a();C.scale(T);var I=.5*f,L=ha.a().range([b,0]),M=(ha.a().range([0,f]),L);e.attr("width",a+r.left+r.right).attr("height",n+r.top+r.bottom);var U=e.append("g").attr("id","snpdist_svgGroup").attr("transform","translate("+r.left+","+r.top+")scale(1)");U.append("g").attr("id","barchart-axis-y").call(C),U.append("g").attr("id","barchart-axis-x").call(D),U.append("g").attr("id","barchart-group").selectAll(".barchart-bar").data(O).enter().append("rect").attr("class","barchart-bar").attr("stroke","gray").attr("stroke-width","0.5px").attr("fill","none").attr("x",(function(e){return"vertical"===s?w(0):T(e[0])})).attr("y",(function(e){return"vertical"===s?T(e[0]):w(e[1])})).attr("width",(function(e){return"vertical"===s?w(e[1])-w(0):E})).attr("height",(function(e){return"vertical"===s?E:Math.abs(w(e[1])-w(0))})),U.append("g").attr("id","boxplot-group").append("line").attr("id","boxplot-center-line").attr("x1","vertical"===s?I:M(o)).attr("x2","vertical"===s?I:M(d)).attr("y1","vertical"===s?M(o):I).attr("y2","vertical"===s?M(d):I).attr("stroke","black")}(ua.a(a.current),s,o,d,c,u)}}(),e.dist_changeIsUserDraw(!1)}),10)}),[f]),Object(r.useEffect)((function(){if(b)switch(p){case"symSnpDist":var t=[],a=[];e.hammingMatrix.forEach((function(e,n){a.push(n),t=t.concat(e)})),!function(e){e&&new dt.ExportToCsv({fieldSeparator:",",filename:"GraphSNP_symetric_pairwise_snp_differences",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0}).generateCsv(e)}(new Mt(a,t).getSymetricEdges().edges),e.dist_changeIsUserExport(!1)}}),[p,b]),Object(n.jsx)(h.a,{children:Object(n.jsx)(g.a,{ref:t,sm:24,children:Object(n.jsx)("div",{id:"snpdist-chart-container",style:{height:"100%",width:"100%"},children:Object(n.jsx)("svg",{id:"snpdist-chart-svg",ref:a})})})})})),Sa=rt.a.Sider,_a=rt.a.Content;var Ea=Object(j.b)((function(e){return{hammingMatrix:e.hammMatrix}}),(function(e){return Object(O.b)({},e)}))((function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(rt.a,{children:[Object(n.jsx)(Sa,{id:"snpdist-sider",children:Object(n.jsx)(la,{})}),Object(n.jsx)(rt.a,{children:Object(n.jsx)(_a,{children:e.hammingMatrix&&Object(n.jsx)(xa,{})})})]})})})),wa=a(147),Ta=a(1132),Da=a(1141),Ca=a(61),Ia=Object(Ca.a)();var La=Object(j.b)((function(e,t){return{navLocation:e.navSettings.navLocation}}),(function(e,t){return Object(O.b)({changeNavLocation:Q},e)}))((function(e){var t=e.navLocation?e.navLocation:function(e){if(!e)return"none";switch(e){case"/":return"home";case"/graphsnp":return"graphsnp";case"/documentation":return"documentation";case"/snpdistance":return"matrix";default:return"none"}}(Ia.location.pathname);return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(Ta.a,{id:"header-menu",mode:"horizontal",selectedKeys:[t],overflowedIndicator:Object(n.jsx)(Da.a,{}),children:[Object(n.jsx)(Ta.a.Item,{style:{padding:"0 20px",margin:"0px"},onClick:function(t){e.changeNavLocation(t.key)},children:Object(n.jsx)(wa.a,{to:"/",exact:!0,children:"Home"})},"home"),Object(n.jsx)(Ta.a.Item,{style:{padding:"0 20px",margin:"0px"},onClick:function(t){e.changeNavLocation(t.key)},children:Object(n.jsx)(wa.a,{to:"/snpdistance",children:"SNP distance"})},"snpdistance"),Object(n.jsx)(Ta.a.Item,{style:{padding:"0 20px",margin:"0px"},onClick:function(t){e.changeNavLocation(t.key)},children:Object(n.jsx)(wa.a,{to:"/graphsnp",children:"GraphSNP"})},"graphsnp"),Object(n.jsx)(Ta.a.Item,{style:{padding:"0 20px",margin:"0px"},onClick:function(t){e.changeNavLocation(t.key)},children:Object(n.jsx)(wa.a,{to:"/documentation",children:"Documentation"})},"documentation")]})})})),Ma=a.p+"static/media/logo.1375c904.png",Ua=(a(1098),function(e){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)(h.a,{id:"main-header",children:[Object(n.jsx)(g.a,{id:"header-navigation",xs:8,sm:18,children:Object(n.jsx)(La,{})}),Object(n.jsx)(g.a,{id:"header-logo",xs:16,sm:6,children:Object(n.jsx)("img",{style:{float:"right"},src:Ma,alt:"GraphSNP",height:"75px"})})]})})}),Aa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/",component:nt}),Object(n.jsx)(p.b,{path:"/graphsnp",component:ta}),Object(n.jsx)(p.b,{path:"/documentation",component:aa}),Object(n.jsx)(p.b,{path:"/snpdistance",component:Ea}),Object(n.jsx)(p.a,{to:"/"})]});return Object(n.jsxs)(p.c,{history:Ia,children:[Object(n.jsx)(Ua,{}),Object(n.jsx)("main",{children:e})]})}}]),a}(r.Component),ka=function(e,t){switch(t.type){case _:return t.payload;default:return e||$a.sequence}},Na=function(e,t){switch(t.type){case S:var a=Object.assign({},e);return t.payload&&t.payload!==e.navLocation&&(a.navLocation=t.payload),a;default:return e||$a.navSettings}},Fa=function(e,t){switch(t.type){case C:var a=Object.assign({},e);return t.payload&&t.payload!==e.method&&(a.method=t.payload),a;case I:var n=Object.assign({},e);return t.payload&&t.payload!==e.layout&&(n.layout=t.payload),n;case L:var r=Object.assign({},e);return t.payload!==e.isUserReDraw&&(r.isUserReDraw=t.payload),r;case M:var s=Object.assign({},e);return t.payload&&t.payload!==e.edgeFilterCutoff&&(s.edgeFilterCutoff=t.payload),s;case U:var i=Object.assign({},e);return t.payload!==e.isUserFilterEdges&&(i.isUserFilterEdges=t.payload),i;case A:var c=Object.assign({},e);return t.payload&&t.payload!==e.clusterMethod&&(c.clusterMethod=t.payload),c;case k:var o=Object.assign({},e);return t.payload!==e.isUserClustering&&(o.isUserClustering=t.payload),o;case N:var d=Object.assign({},e);return t.payload!==e.isEdgeScaled&&(d.isEdgeScaled=t.payload),d;case F:var l=Object.assign({},e);return t.payload!==e.edgeScaleFactor&&(l.edgeScaleFactor=t.payload),l;case R:var u=Object.assign({},e);return t.payload!==e.isHideEdgesByCutoff&&(u.isHideEdgesByCutoff=t.payload),u;case G:var p=Object.assign({},e);return t.payload!==e.hiddenEdgesCutoff&&(p.hiddenEdgesCutoff=t.payload),p;case q:var h=Object.assign({},e);return t.payload&&t.payload!==e.colorNodedBy&&(h.colorNodedBy=t.payload),h;case P:var g=Object.assign({},e);return t.payload&&t.payload!==e.exportFormat&&(g.exportFormat=t.payload),g;case H:var f=Object.assign({},e);return t.payload!==e.isUserDownloading&&(f.isUserDownloading=t.payload),f;case B:var b=Object.assign({},e);return t.payload&&t.payload!==e.transIncludeLocLevel&&(b.transIncludeLocLevel=t.payload),b;default:return e||$a.graphSettings}},Ra=function(e,t){switch(t.type){case E:return t.payload;default:return e||$a.metadata}},Ga=function(e,t){switch(t.type){case T:return t.payload;default:return e||$a.patientMovement}},qa=function(e,t){switch(t.type){case v:return t.payload;default:return e||$a.isInputLoading}},Pa=function(e,t){switch(t.type){case y:return t.payload;default:return e||$a.graphObject}},Ha=function(e,t){switch(t.type){case m:return t.payload;default:return e||$a.graphClusters}},Ba=function(e,t){switch(t.type){case x:return t.payload;default:return e||$a.hammMatrix}},za=function(e,t){switch(t.type){case w:return t.payload;default:return e||$a.categoricalMap}},Va=function(e,t){switch(t.type){case D:return t.payload;default:return e||$a.colorLUT}},Xa=function(e,t){switch(t.type){case z:var a=Object.assign({},e);return t.payload&&t.payload!==e.dataToDisplay&&(a.dataToDisplay=t.payload),a;case V:var n=Object.assign({},e);return t.payload&&t.payload!==e.dataColumn&&(n.dataColumn=t.payload),n;case X:var r=Object.assign({},e);return t.payload!==e.chartOrientation&&(r.chartOrientation=t.payload),r;case $:var s=Object.assign({},e);return t.payload!==e.chartType&&(s.chartType=t.payload),s;case Y:var i=Object.assign({},e);return t.payload&&t.payload!==e.snpDistExportFormat&&(i.snpDistExportFormat=t.payload),i;case J:var c=Object.assign({},e);return t.payload!==e.isUserDrawChart&&(c.isUserDrawChart=t.payload),c;case W:var o=Object.assign({},e);return t.payload!==e.isUserGenerateMatrix&&(o.isUserGenerateMatrix=t.payload),o;case K:var d=Object.assign({},e);return t.payload!==e.isUserExportSnpDist&&(d.isUserExportSnpDist=t.payload),d;default:return e||$a.snpDistSettings}},$a={sequence:null,metadata:null,categoricalMap:null,patientMovement:null,isInputLoading:!1,hammMatrix:null,graphObject:null,graphClusters:null,graphSettings:{method:"mcg",layout:"cose",isUserReDraw:!1,isUserFilteringEdge:!1,edgeFilterCutoff:25,clusterMethod:"Connected Components",isUserClustering:!1,isEdgeScaled:!1,edgeScaleFactor:1,isHideEdgesByCutoff:!1,hiddenEdgesCutoff:0,colorNodedBy:"na",exportFormat:"clusterID",isUserDownloading:!1,transIncludeLocLevel:1},snpDistSettings:{dataToDisplay:"all",dataColumn:null,chartType:"violin",isUserGenerateMatrix:!1,chartOrientation:"horizontal",isUserDrawChart:!1,snpDistExportFormat:"svg",isUserExportSnpDist:!1},navSettings:{navLocation:null},colorLUT:null},Wa=Object(O.c)({sequence:ka,metadata:Ra,categoricalMap:za,patientMovement:Ga,navSettings:Na,graphSettings:Fa,hammMatrix:Ba,graphObject:Pa,graphClusters:Ha,isInputLoading:qa,colorLUT:Va,snpDistSettings:Xa},$a),Ya=a(495),Ja=a.n(Ya),Ka=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1142)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))},Qa=function(){return Object(O.a)(Ja.a)(O.d)(Wa,$a,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}();c.a.render(Object(n.jsx)(j.a,{store:Qa,children:Object(n.jsx)(Aa,{})}),document.getElementById("root")),Ka()},238:function(e,t,a){},472:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},604:function(e,t){},606:function(e,t){},975:function(e,t,a){}},[[1101,1,2]]]);